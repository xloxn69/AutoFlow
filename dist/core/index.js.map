{"version":3,"sources":["../../src/core/index.ts","../../src/core/validator.ts"],"sourcesContent":["/**\n * AutoFlow Core - Pure TypeScript validation engine\n * Zero React dependencies - works in any JavaScript runtime\n */\n\nexport {\n  // Main validator class\n  AutoFlowValidator,\n  AutomaterLinter, // Legacy alias\n\n  // Configuration\n  DEFAULT_LINT_CONFIG,\n\n  // Core types\n  type AutomaterWorkflow,\n  type WorkflowTrigger,\n  type WorkflowNode,\n  type VariableDefinition,\n  type LintIssue,\n  type WorkflowLintResult,\n  type LintConfig,\n} from './validator'\n","/**\n * AutoFlow Core Validator\n *\n * Pure TypeScript workflow validation engine with zero React dependencies\n * Can run in Node.js, browser, Deno, or any JavaScript runtime\n */\n\n// Core workflow interfaces\nexport interface AutomaterWorkflow {\n  id: string\n  name: string\n  description?: string\n  icon?: string\n  color?: string\n  version: string\n  category?: string\n  tags?: string[]\n  trigger: WorkflowTrigger\n  nodes: WorkflowNode[]\n  permissions?: string[]\n  variables?: VariableDefinition[]\n  visibility?: 'public' | 'private' | 'unlisted'\n  createdAt?: string\n  updatedAt?: string\n}\n\nexport interface WorkflowTrigger {\n  type: 'event' | 'slash_command' | 'prefixed_command' | 'schedule'\n  event?: string\n  command?: string\n  prefix?: string\n  schedule?: string\n}\n\nexport interface WorkflowNode {\n  id: string\n  type: 'trigger' | 'action' | 'condition' | 'transformer' | 'end'\n  action?: string\n  params?: Record<string, unknown>\n  connections?: string[]\n  onError?: string\n  weight?: number\n  permissions?: string[]\n}\n\nexport interface VariableDefinition {\n  name: string\n  type: 'guild' | 'member' | 'custom'\n  scope: 'guild' | 'global'\n  description?: string\n  default?: unknown\n}\n\n// Lint result interfaces\nexport interface LintIssue {\n  id: string\n  ruleId: string\n  errorCode: string\n  family: 'AUT' | 'SYS'\n  severity: 'info' | 'warn' | 'error' | 'critical'\n  message: string\n  remediation: string\n  devHint?: string\n  location?: {\n    nodeId?: string\n    edgeId?: string\n    path?: string\n    line?: number\n    column?: number\n  }\n  context?: Record<string, unknown>\n  fixable?: boolean\n  suggestions?: string[]\n  timestamp?: number\n}\n\nexport interface WorkflowLintResult {\n  workflowId: string\n  isValid: boolean\n  summary: {\n    total: number\n    errors: number\n    warnings: number\n    infos: number\n    criticals: number\n  }\n  issues: LintIssue[]\n  errors: LintIssue[]\n  warnings: LintIssue[]\n  infos: LintIssue[]\n  criticals: LintIssue[]\n  fixableCount: number\n  timestamp: number\n  performance: {\n    analysisTime: number\n    rulesExecuted: number\n  }\n}\n\nexport interface LintConfig {\n  rules: Record<string, 'off' | 'warn' | 'error'>\n  settings?: {\n    rateLimits?: {\n      maxWorkflowWeight: number\n      maxNodeWeight: number\n      warnThreshold: number\n    }\n    naming?: {\n      workflowIdPattern: string\n      nodeIdPattern: string\n      variableNamePattern: string\n    }\n  }\n}\n\n// Default configuration\nexport const DEFAULT_LINT_CONFIG: LintConfig = {\n  rules: {\n    // Schema validation rules\n    'schema/required-fields': 'error',\n    'schema/field-types': 'error',\n    'schema/semver': 'error',\n    'schema/enum-values': 'error',\n\n    // Graph integrity rules\n    'graph/missing-nodes': 'error',\n    'graph/entry-points': 'error',\n    'graph/unreachable-nodes': 'warn',\n    'graph/infinite-loops': 'error',\n    'graph/dead-ends': 'warn',\n\n    // Variable and template rules\n    'variable/undefined-reference': 'error',\n    'variable/invalid-interpolation': 'error',\n    'variable/scope-mismatch': 'warn',\n    'variable/naming-convention': 'warn',\n\n    // Trigger and action rules\n    'trigger/unknown-event': 'error',\n    'trigger/invalid-command': 'error',\n    'action/unknown-type': 'error',\n    'action/missing-params': 'error',\n\n    // Security rules\n    'security/missing-permissions': 'error',\n    'security/excessive-permissions': 'warn',\n    'security/hardcoded-secrets': 'error',\n    'security/pii-exposure': 'warn',\n\n    // Performance rules\n    'perf/missing-weight': 'warn',\n    'perf/high-weight': 'warn',\n    'perf/deep-nesting': 'warn',\n    'perf/large-workflow': 'info',\n\n    // Style rules\n    'style/naming-convention': 'warn',\n    'style/description-required': 'warn',\n    'style/icon-color-consistency': 'info',\n    'style/deprecated-features': 'warn'\n  },\n  settings: {\n    rateLimits: {\n      maxWorkflowWeight: 1000,\n      maxNodeWeight: 100,\n      warnThreshold: 0.8\n    },\n    naming: {\n      workflowIdPattern: '^automation-[A-Za-z0-9]{15}$',\n      nodeIdPattern: '^[a-zA-Z][a-zA-Z0-9_-]*$',\n      variableNamePattern: '^[a-zA-Z][a-zA-Z0-9_]*$'\n    }\n  }\n}\n\n// Error catalog - AUT and SYS families\nconst ERROR_CATALOG = {\n  // AUT family - 3xxx range (Missing/Invalid Resources)\n  3310: {\n    family: 'AUT' as const,\n    key: 'AUT_WORKFLOW_UNREACHABLE_NODES',\n    severity: 'warn' as const,\n    message: 'Workflow contains unreachable nodes',\n    remediation: 'Remove unreachable nodes or add connections to make them reachable'\n  },\n  3311: {\n    family: 'AUT' as const,\n    key: 'AUT_NODE_MISSING_CONNECTIONS',\n    severity: 'error' as const,\n    message: 'Node is missing required connections',\n    remediation: 'Add connections array to node or connect to valid target nodes'\n  },\n  3312: {\n    family: 'AUT' as const,\n    key: 'AUT_VARIABLE_INVALID_INTERPOLATION',\n    severity: 'error' as const,\n    message: 'Invalid variable interpolation syntax',\n    remediation: 'Use correct syntax: {variable.name} or {member.displayName}'\n  },\n  3313: {\n    family: 'AUT' as const,\n    key: 'AUT_ICON_NOT_APPROVED',\n    severity: 'warn' as const,\n    message: 'Icon is not in the approved icon catalog',\n    remediation: 'Choose from approved icons in Icon System PRD'\n  },\n\n  // AUT family - 4xxx range (Policy Limits)\n  4120: {\n    family: 'AUT' as const,\n    key: 'AUT_RATE_LIMIT_HIGH_WEIGHT',\n    severity: 'warn' as const,\n    message: 'Workflow weight may cause rate limiting',\n    remediation: 'Reduce node weight or optimize workflow to use fewer resources'\n  },\n  4121: {\n    family: 'AUT' as const,\n    key: 'AUT_NODE_MISSING_WEIGHT',\n    severity: 'warn' as const,\n    message: 'Action node missing rate limit weight',\n    remediation: 'Add weight property to action node for accurate rate limiting'\n  },\n\n  // SYS family - 5xxx range (Platform & External Failures)\n  5510: {\n    family: 'SYS' as const,\n    key: 'SYS_WORKFLOW_PARSE_ERROR',\n    severity: 'error' as const,\n    message: 'Unable to parse workflow file',\n    remediation: 'Check JSON syntax and workflow structure'\n  },\n  5511: {\n    family: 'SYS' as const,\n    key: 'SYS_SCHEMA_VALIDATION_FAILED',\n    severity: 'error' as const,\n    message: 'Workflow schema validation failed',\n    remediation: 'Fix schema violations listed in validation errors'\n  }\n} as const\n\n/**\n * Main AutoFlow validator class\n * Pure TypeScript - no React dependencies\n */\nexport class AutoFlowValidator {\n  private config: LintConfig\n  private nextIssueId = 1\n\n  constructor(config: Partial<LintConfig> = {}) {\n    this.config = {\n      ...DEFAULT_LINT_CONFIG,\n      ...config,\n      rules: {\n        ...DEFAULT_LINT_CONFIG.rules,\n        ...config.rules\n      },\n      settings: {\n        ...DEFAULT_LINT_CONFIG.settings,\n        ...config.settings\n      }\n    }\n  }\n\n  /**\n   * Main validation method - analyzes a complete workflow\n   */\n  async validateWorkflow(workflow: Partial<AutomaterWorkflow>): Promise<WorkflowLintResult> {\n    const startTime = Date.now()\n    const issues: LintIssue[] = []\n    let rulesExecuted = 0\n\n    try {\n      // 1. Basic structure validation\n      const structureIssues = this.validateWorkflowStructure(workflow)\n      issues.push(...structureIssues)\n      rulesExecuted += 4\n\n      // 2. Graph integrity validation (only if we have nodes)\n      if (workflow.nodes && workflow.nodes.length > 0) {\n        const graphIssues = this.validateGraphIntegrity(workflow.nodes)\n        issues.push(...graphIssues)\n        rulesExecuted += 5\n      }\n\n      // 3. Node-specific validation\n      if (workflow.nodes) {\n        const nodeIssues = this.validateNodes(workflow.nodes)\n        issues.push(...nodeIssues)\n        rulesExecuted += workflow.nodes.length * 3\n      }\n\n      // 4. Variable validation\n      if (workflow.variables) {\n        const variableIssues = this.validateVariables(workflow.variables, workflow)\n        issues.push(...variableIssues)\n        rulesExecuted += workflow.variables.length * 2\n      }\n\n      // 5. Performance analysis\n      const performanceIssues = this.validatePerformance(workflow)\n      issues.push(...performanceIssues)\n      rulesExecuted += 3\n\n      // Filter issues based on configuration\n      const filteredIssues = this.filterIssues(issues)\n\n      // Categorize issues\n      const errors = filteredIssues.filter(i => i.severity === 'error')\n      const warnings = filteredIssues.filter(i => i.severity === 'warn')\n      const infos = filteredIssues.filter(i => i.severity === 'info')\n      const criticals = filteredIssues.filter(i => i.severity === 'critical')\n\n      return {\n        workflowId: workflow.id || 'unknown',\n        isValid: errors.length === 0 && criticals.length === 0,\n        summary: {\n          total: filteredIssues.length,\n          errors: errors.length,\n          warnings: warnings.length,\n          infos: infos.length,\n          criticals: criticals.length\n        },\n        issues: filteredIssues,\n        errors,\n        warnings,\n        infos,\n        criticals,\n        fixableCount: filteredIssues.filter(i => i.fixable).length,\n        timestamp: Date.now(),\n        performance: {\n          analysisTime: Date.now() - startTime,\n          rulesExecuted\n        }\n      }\n\n    } catch (error) {\n      return {\n        workflowId: workflow.id || 'unknown',\n        isValid: false,\n        summary: { total: 1, errors: 1, warnings: 0, infos: 0, criticals: 0 },\n        issues: [this.createSystemError(error)],\n        errors: [this.createSystemError(error)],\n        warnings: [],\n        infos: [],\n        criticals: [],\n        fixableCount: 0,\n        timestamp: Date.now(),\n        performance: {\n          analysisTime: Date.now() - startTime,\n          rulesExecuted\n        }\n      }\n    }\n  }\n\n  /**\n   * Quick validation for minimal node structure\n   * Accepts any object with id, type, action, params, connections, weight\n   */\n  async validateNodes(nodes: Array<{\n    id: string\n    type?: string\n    action?: string\n    params?: Record<string, unknown>\n    connections?: string[]\n    weight?: number\n  }>): Promise<LintIssue[]> {\n    const issues: LintIssue[] = []\n\n    // Convert minimal nodes to WorkflowNode format\n    const workflowNodes: WorkflowNode[] = nodes.map(node => ({\n      id: node.id,\n      type: (node.type || 'action') as WorkflowNode['type'],\n      action: node.action,\n      params: node.params,\n      connections: node.connections || [],\n      weight: node.weight\n    }))\n\n    // Basic graph validation\n    const graphIssues = this.validateGraphIntegrity(workflowNodes)\n    issues.push(...graphIssues)\n\n    const nodeIssues = this.validateNodeList(workflowNodes)\n    issues.push(...nodeIssues)\n\n    return this.filterIssues(issues)\n  }\n\n  // Validation methods\n  private validateWorkflowStructure(workflow: Partial<AutomaterWorkflow>): LintIssue[] {\n    const issues: LintIssue[] = []\n\n    // Required fields validation\n    if (!this.isRuleEnabled('schema/required-fields')) return issues\n\n    const requiredFields: (keyof AutomaterWorkflow)[] = ['id', 'name', 'version', 'trigger']\n\n    for (const field of requiredFields) {\n      if (!workflow[field]) {\n        issues.push(this.createIssue('schema/required-fields', 5511, {\n          message: `Required field '${field}' is missing`,\n          location: { path: field }\n        }))\n      }\n    }\n\n    // Version format validation\n    if (workflow.version && this.isRuleEnabled('schema/semver')) {\n      const semverPattern = /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-[0-9A-Za-z.-]+)?(?:\\+[0-9A-Za-z.-]+)?$/\n      if (!semverPattern.test(workflow.version)) {\n        issues.push(this.createIssue('schema/semver', 5511, {\n          message: 'Version must be valid SemVer (e.g., 1.2.3)',\n          location: { path: 'version' }\n        }))\n      }\n    }\n\n    return issues\n  }\n\n  private validateGraphIntegrity(nodes: WorkflowNode[]): LintIssue[] {\n    const issues: LintIssue[] = []\n\n    if (!nodes || nodes.length === 0) return issues\n\n    // Build adjacency lists\n    const nodeIds = new Set(nodes.map(n => n.id))\n    const adjacencyList = new Map<string, string[]>()\n    const reverseAdjacencyList = new Map<string, string[]>()\n\n    // Initialize\n    for (const node of nodes) {\n      adjacencyList.set(node.id, [])\n      reverseAdjacencyList.set(node.id, [])\n    }\n\n    // Build connections\n    for (const node of nodes) {\n      const connections = node.connections || []\n      for (const targetId of connections) {\n        // Check for missing nodes\n        if (!nodeIds.has(targetId) && this.isRuleEnabled('graph/missing-nodes')) {\n          issues.push(this.createIssue('graph/missing-nodes', 3311, {\n            message: `Node '${node.id}' connects to non-existent node '${targetId}'`,\n            location: { nodeId: node.id }\n          }))\n          continue\n        }\n\n        adjacencyList.get(node.id)?.push(targetId)\n        reverseAdjacencyList.get(targetId)?.push(node.id)\n      }\n    }\n\n    // Find entry points (trigger nodes or nodes with no incoming connections)\n    const entryNodes = nodes.filter(node =>\n      node.type === 'trigger' ||\n      (reverseAdjacencyList.get(node.id)?.length || 0) === 0\n    )\n\n    // Validate entry points\n    if (this.isRuleEnabled('graph/entry-points')) {\n      if (entryNodes.length === 0) {\n        issues.push(this.createIssue('graph/entry-points', 3311, {\n          message: 'Workflow must have at least one entry point (trigger node)',\n          location: { path: 'nodes' }\n        }))\n      }\n    }\n\n    // Find unreachable nodes\n    if (this.isRuleEnabled('graph/unreachable-nodes')) {\n      const reachable = new Set<string>()\n\n      const dfs = (nodeId: string): void => {\n        if (reachable.has(nodeId)) return\n        reachable.add(nodeId)\n\n        for (const connected of adjacencyList.get(nodeId) || []) {\n          dfs(connected)\n        }\n      }\n\n      entryNodes.forEach(node => dfs(node.id))\n\n      const unreachableNodes = nodes.filter(node => !reachable.has(node.id))\n      for (const node of unreachableNodes) {\n        issues.push(this.createIssue('graph/unreachable-nodes', 3310, {\n          message: `Node '${node.id}' is unreachable from entry points`,\n          location: { nodeId: node.id }\n        }))\n      }\n    }\n\n    return issues\n  }\n\n  private validateNodeList(nodes: WorkflowNode[]): LintIssue[] {\n    const issues: LintIssue[] = []\n\n    for (const node of nodes) {\n      // Action type validation\n      if (node.type === 'action' && this.isRuleEnabled('action/unknown-type')) {\n        if (!node.action) {\n          issues.push(this.createIssue('action/missing-params', 3311, {\n            message: `Action node '${node.id}' is missing action type`,\n            location: { nodeId: node.id }\n          }))\n        }\n      }\n\n      // Weight validation for performance\n      if (node.type === 'action' && this.isRuleEnabled('perf/missing-weight')) {\n        if (typeof node.weight !== 'number') {\n          issues.push(this.createIssue('perf/missing-weight', 4121, {\n            message: `Action node '${node.id}' is missing rate limit weight`,\n            location: { nodeId: node.id },\n            suggestions: ['Add weight property (typical values: 5-30)']\n          }))\n        }\n      }\n\n      // High weight warning\n      if (typeof node.weight === 'number' && this.isRuleEnabled('perf/high-weight')) {\n        const maxWeight = this.config.settings?.rateLimits?.maxNodeWeight || 100\n        if (node.weight > maxWeight) {\n          issues.push(this.createIssue('perf/high-weight', 4120, {\n            message: `Node '${node.id}' weight (${node.weight}) exceeds recommended maximum (${maxWeight})`,\n            location: { nodeId: node.id }\n          }))\n        }\n      }\n    }\n\n    return issues\n  }\n\n  private validateVariables(variables: VariableDefinition[], workflow: Partial<AutomaterWorkflow>): LintIssue[] {\n    const issues: LintIssue[] = []\n\n    if (!this.isRuleEnabled('variable/naming-convention')) return issues\n\n    const pattern = this.config.settings?.naming?.variableNamePattern || '^[a-zA-Z][a-zA-Z0-9_]*$'\n    const regex = new RegExp(pattern)\n\n    for (const variable of variables) {\n      if (!regex.test(variable.name)) {\n        issues.push(this.createIssue('variable/naming-convention', 3312, {\n          message: `Variable name '${variable.name}' doesn't follow naming convention`,\n          location: { path: `variables.${variable.name}` },\n          suggestions: ['Use camelCase or snake_case naming']\n        }))\n      }\n    }\n\n    return issues\n  }\n\n  private validatePerformance(workflow: Partial<AutomaterWorkflow>): LintIssue[] {\n    const issues: LintIssue[] = []\n\n    if (!workflow.nodes) return issues\n\n    // Large workflow warning\n    if (this.isRuleEnabled('perf/large-workflow')) {\n      if (workflow.nodes.length > 50) {\n        issues.push(this.createIssue('perf/large-workflow', 4120, {\n          message: `Large workflow (${workflow.nodes.length} nodes) may be difficult to maintain`,\n          location: { path: 'nodes' }\n        }))\n      }\n    }\n\n    // Calculate total workflow weight\n    if (this.isRuleEnabled('perf/high-weight')) {\n      const totalWeight = workflow.nodes.reduce((sum, node) => sum + (node.weight || 0), 0)\n      const maxWeight = this.config.settings?.rateLimits?.maxWorkflowWeight || 1000\n      const warnThreshold = this.config.settings?.rateLimits?.warnThreshold || 0.8\n\n      if (totalWeight > maxWeight * warnThreshold) {\n        issues.push(this.createIssue('perf/high-weight', 4120, {\n          message: `Total workflow weight (${totalWeight}) approaches rate limit threshold`,\n          location: { path: 'nodes' }\n        }))\n      }\n    }\n\n    return issues\n  }\n\n  // Helper methods\n  private filterIssues(issues: LintIssue[]): LintIssue[] {\n    return issues.filter(issue => {\n      const ruleConfig = this.config.rules[issue.ruleId]\n      return ruleConfig && ruleConfig !== 'off'\n    })\n  }\n\n  private isRuleEnabled(ruleId: string): boolean {\n    const config = this.config.rules[ruleId]\n    return config && config !== 'off'\n  }\n\n  private createIssue(\n    ruleId: string,\n    errorCode: keyof typeof ERROR_CATALOG,\n    options: {\n      message?: string\n      location?: LintIssue['location']\n      suggestions?: string[]\n    }\n  ): LintIssue {\n    const catalog = ERROR_CATALOG[errorCode]\n\n    return {\n      id: `issue-${this.nextIssueId++}`,\n      ruleId,\n      errorCode: `${catalog.family}-${errorCode}`,\n      family: catalog.family,\n      severity: catalog.severity,\n      message: options.message || catalog.message,\n      remediation: catalog.remediation,\n      location: options.location,\n      suggestions: options.suggestions,\n      fixable: false,\n      timestamp: Date.now()\n    }\n  }\n\n  private createSystemError(error: unknown): LintIssue {\n    return {\n      id: `system-error-${this.nextIssueId++}`,\n      ruleId: 'system/parse-error',\n      errorCode: 'SYS-5510',\n      family: 'SYS',\n      severity: 'error',\n      message: `System error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n      remediation: 'Check workflow structure and try again',\n      fixable: false,\n      timestamp: Date.now()\n    }\n  }\n}\n\n// Legacy class name alias for backward compatibility\nexport { AutoFlowValidator as AutomaterLinter }\n"],"mappings":"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","names":[]}